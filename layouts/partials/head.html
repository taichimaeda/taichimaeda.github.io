<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>{{ if .IsHome }}{{ site.Title }}{{ else }}{{ printf "%s | %s" .Title site.Title }}{{ end }}</title>
<link rel="icon" href="/favicon.svg" sizes="any" type="image/svg+xml" />

{{- template "_internal/opengraph.html" . -}}
{{- template "_internal/twitter_cards.html" . -}}

{{- partialCached "head/css.html" . -}}
{{- partialCached "head/js.html" . -}}

<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">

<!-- NOTE: Added OG image: -->
{{ $bg := resources.Get "opengraph/background.png" }}
{{ $title := .Title }}
 <!-- about 25 characters per line -->
{{ $lines := div (add (len .Title) (sub 25 1)) 25 }}
{{ warnf "Page: %s, Lines: %d" .Title $lines }}
{{ $options := dict
  "color" "#000000"
  "size" 80
  "lineSpacing" 10
  "x" 120
  "y" (sub 220 (mul (sub $lines 1) (div (add 80 10) 2)))
  "font" (resources.Get "opengraph/arial_black.ttf")
}}
{{ $filter := images.Text $title $options }}
{{ $output := $bg | images.Filter $filter }}
<meta property="og:image" content="{{ $output.Permalink }}" />
